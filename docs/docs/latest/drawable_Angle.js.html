<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: drawable/Angle.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: drawable/Angle.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';


const Rac = require('../Rac');
const utils = require('../util/utils');


/**
* Angle measured with a `turn` value in the `[0,1)` range.
* @alias Rac.Angle
*/
class Angle {

  constructor(rac, turn) {
    utils.assertExists(rac);
    utils.assertNumber(turn);
    this.rac = rac;
    this.setTurn(turn);
  }


  /**
  * Returns a string representation intended for human consumption.
  * @param {number=} digits The number of digits to appear after the
  * decimal point, if ommited all digits are printed.
  */
  toString(digits = null) {
    let turnString = digits === null
      ? this.turn.toString()
      : this.turn.toFixed(digits);
    return `Angle(${turnString})`;
  }


  equals(someAngle) {
    const other = Angle.from(this.rac, someAngle);
    const diff = Math.abs(this.turn - other.turn);
    return diff &lt; this.rac.unitaryEqualityThreshold
      // For close values that loop around
      || (1 - diff) &lt; this.rac.unitaryEqualityThreshold;
  }


  setTurn(turn) {
    this.turn = turn % 1;
    if (this.turn &lt; 0) {
      this.turn = (this.turn + 1) % 1;
    }
    return this;
  }

} // class Angle

module.exports = Angle;

/**
* Returns an `Angle` produced with `something`.
*
* + If `something` is an instance of `Angle` that same object is returned.
* + If `something` is a `number`, it is used as `turn` value.
* + If `something` is a `{@link Rac.Segment}`, returns its angle.
* + Otherwise an error is thrown.
*
* @param {Rac} rac Instance to pass along to newly created objects
* @param {number|Rac.Angle|Rac.Segment} something Object to use to produce
* an `Angle`.
*/
Angle.from = function(rac, something) {
  if (something instanceof Rac.Angle) {
    return something;
  }
  if (typeof something === 'number') {
    return new Angle(rac, something);
  }
  if (something instanceof Rac.Segment) {
    return something.angle();
  }

  throw Rac.Exception.invalidObjectType(
    `Cannot derive Rac.Angle - something-type:${utils.typeName(something)}`);
};


Angle.fromRadians = function(rac, radians) {
  return new Angle(rac, radians / Rac.TAU);
};


// If `turn`` is zero returns 1 instead, otherwise returns `turn`.
Angle.prototype.turnOne = function() {
  if (this.turn === 0) { return 1; }
  return this.turn;
}

Angle.prototype.add = function(someAngle) {
  let other = this.rac.Angle.from(someAngle);
  return new Angle(this.rac, this.turn + other.turn);
};

Angle.prototype.subtract = function(someAngle) {
  let other = this.rac.Angle.from(someAngle);
  return new Angle(this.rac, this.turn - other.turn);
};


// Returns the equivalent to `someAngle` shifted to have `this` as the
// origin, in the `clockwise` orientation.
//
// For angle at `0.1`, `shift(0.5)` will return a `0.6` angle.
// For a clockwise orientation, equivalent to `this + someAngle`.
Angle.prototype.shift = function(someAngle, clockwise = true) {
  let angle = this.rac.Angle.from(someAngle);
  return clockwise
    ? this.add(angle)
    : this.subtract(angle);
};

// Returns the equivalent of `this` when `someOrigin` is considered the
// origin, in the `clockwise` orientation.
// TODO: add example and difference to shift
Angle.prototype.shiftToOrigin = function(someOrigin, clockwise) {
  let origin = this.rac.Angle.from(someOrigin);
  return origin.shift(this, clockwise);
};

// Returns `factor * turn`.
Angle.prototype.mult = function(factor) {
  return new Angle(this.rac, this.turn * factor);
};

// Returns `factor * turnOne()`, where `turn` is considered in the
// range (0, 1].
// Useful when doing ratio calculation where a zero angle corresponds to
// a complete-circle since:
// ```
// rac.Angle(0).mult(0.5) // returns rac.Angle(0)
// // whereas
// rac.Angle(0).multOne(0.5) // return rac.Angle(0.5)
// ```
Angle.prototype.multOne = function(factor) {
  return new Angle(this.rac, this.turnOne() * factor);
};

// Returns `this` adding half a turn.
Angle.prototype.inverse = function() {
  return this.add(this.rac.Angle.inverse);
};

Angle.prototype.negative = function() {
  return new Angle(this.rac, -this.turn);
};

Angle.prototype.perpendicular = function(clockwise = true) {
  return this.shift(this.rac.Angle.square, clockwise);
};

// Returns an Angle that represents the distance from `this` to `someAngle`
// traveling in the `clockwise` orientation.
Angle.prototype.distance = function(someAngle, clockwise = true) {
  let other = this.rac.Angle.from(someAngle);
  let distance = other.subtract(this);
  return clockwise
    ? distance
    : distance.negative();
};

Angle.prototype.radians = function() {
  return this.turn * Rac.TAU;
};

Angle.prototype.degrees = function() {
  return this.turn * 360;
};

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="instance.html">instance</a></li><li><a href="instance.Angle.html">Angle</a></li><li><a href="rac.Arc_.html">Arc</a></li><li><a href="rac.Color_.html">Color</a></li><li><a href="rac.Fill_.html">Fill</a></li><li><a href="rac.Point_.html">Point</a></li><li><a href="rac.Segment_.html">Segment</a></li><li><a href="rac.Stroke_.html">Stroke</a></li><li><a href="rac.Text_.html">Text</a></li><li><a href="utils.html">utils</a></li></ul><h3>Classes</h3><ul><li><a href="Rac.html">Rac</a></li><li><a href="Rac.Angle.html">Angle</a></li><li><a href="Rac.Arc.html">Arc</a></li><li><a href="Rac.ArcControl.html">ArcControl</a></li><li><a href="Rac.Color.html">Color</a></li><li><a href="Rac.Control.html">Control</a></li><li><a href="Rac.Exception.html">Exception</a></li><li><a href="Rac.Fill.html">Fill</a></li><li><a href="Rac.P5Drawer.html">P5Drawer</a></li><li><a href="Rac.Point.html">Point</a></li><li><a href="Rac.Ray.html">Ray</a></li><li><a href="Rac.Segment.html">Segment</a></li><li><a href="Rac.SegmentControl.html">SegmentControl</a></li><li><a href="Rac.Stroke.html">Stroke</a></li><li><a href="Rac.Text.html">Text</a></li><li><a href="Rac.Text.Format.html">Format</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Wed Apr 07 2021 11:34:38 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
